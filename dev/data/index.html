<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Flight Path &amp; INS Data · MagNav.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="MagNav.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">MagNav.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">MagNav.jl</a></li><li><a class="tocitem" href="../structs/">Custom Structs</a></li><li class="is-active"><a class="tocitem" href>Flight Path &amp; INS Data</a><ul class="internal"><li><a class="tocitem" href="#Load-Flight-Data"><span>Load Flight Data</span></a></li><li><a class="tocitem" href="#Create-Flight-Data"><span>Create Flight Data</span></a></li></ul></li><li><a class="tocitem" href="../maps/">Magnetic Anomaly Maps</a></li><li><a class="tocitem" href="../comp/">Aeromagnetic Compensation</a></li><li><a class="tocitem" href="../nncomp/">NN-Based Model Diagrams</a></li><li><a class="tocitem" href="../nav/">Navigation Algorithms</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Flight Path &amp; INS Data</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Flight Path &amp; INS Data</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/master/docs/src/data.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Flight-Path-and-INS-Data"><a class="docs-heading-anchor" href="#Flight-Path-and-INS-Data">Flight Path &amp; INS Data</a><a id="Flight-Path-and-INS-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Flight-Path-and-INS-Data" title="Permalink"></a></h1><p>The following are key functions related to obtaining flight path &amp; INS data.</p><h2 id="Load-Flight-Data"><a class="docs-heading-anchor" href="#Load-Flight-Data">Load Flight Data</a><a id="Load-Flight-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Load-Flight-Data" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="MagNav.get_XYZ0" href="#MagNav.get_XYZ0"><code>MagNav.get_XYZ0</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_XYZ0(xyz_file::String,
         traj_field::Symbol = :traj,
         ins_field::Symbol  = :ins_data;
         flight             = 1,
         line               = 1,
         dt                 = 0.1,
         silent::Bool       = false)</code></pre><p>Get the minimum dataset required for MagNav from saved HDF5 or MAT file. Not all fields within the <code>XYZ0</code> flight data struct are required. The minimum data required in the HDF5 or MAT file includes:</p><ul><li><code>lat</code>, <code>lon</code>, <code>alt</code> (position)</li><li><code>mag_1_uc</code> OR <code>mag_1_c</code> (scalar magnetometer measurements)</li></ul><p>If an HDF5 file is provided, the possible fields in the file are:</p><table><tr><th style="text-align: left"><strong>Field</strong></th><th style="text-align: left"><strong>Type</strong></th><th style="text-align: left"><strong>Description</strong></th></tr><tr><td style="text-align: left"><code>dt</code></td><td style="text-align: left">scalar</td><td style="text-align: left">measurement time step [s]</td></tr><tr><td style="text-align: left"><code>tt</code></td><td style="text-align: left">vector</td><td style="text-align: left">time [s]</td></tr><tr><td style="text-align: left"><code>lat</code></td><td style="text-align: left">vector</td><td style="text-align: left">latitude  [deg]</td></tr><tr><td style="text-align: left"><code>lon</code></td><td style="text-align: left">vector</td><td style="text-align: left">longitude [deg]</td></tr><tr><td style="text-align: left"><code>alt</code></td><td style="text-align: left">vector</td><td style="text-align: left">altitude  [m]</td></tr><tr><td style="text-align: left"><code>vn</code></td><td style="text-align: left">vector</td><td style="text-align: left">north velocity [m/s]</td></tr><tr><td style="text-align: left"><code>ve</code></td><td style="text-align: left">vector</td><td style="text-align: left">east  velocity [m/s]</td></tr><tr><td style="text-align: left"><code>vd</code></td><td style="text-align: left">vector</td><td style="text-align: left">down  velocity [m/s]</td></tr><tr><td style="text-align: left"><code>fn</code></td><td style="text-align: left">vector</td><td style="text-align: left">north specific force [m/s]</td></tr><tr><td style="text-align: left"><code>fe</code></td><td style="text-align: left">vector</td><td style="text-align: left">east  specific force [m/s]</td></tr><tr><td style="text-align: left"><code>fd</code></td><td style="text-align: left">vector</td><td style="text-align: left">down  specific force [m/s]</td></tr><tr><td style="text-align: left"><code>Cnb</code></td><td style="text-align: left">3x3xN</td><td style="text-align: left">direction cosine matrix (body to navigation) [-]</td></tr><tr><td style="text-align: left"><code>roll</code></td><td style="text-align: left">vector</td><td style="text-align: left">roll [deg]</td></tr><tr><td style="text-align: left"><code>pitch</code></td><td style="text-align: left">vector</td><td style="text-align: left">pitch [deg]</td></tr><tr><td style="text-align: left"><code>yaw</code></td><td style="text-align: left">vector</td><td style="text-align: left">yaw [deg]</td></tr><tr><td style="text-align: left"><code>flux_a_x</code></td><td style="text-align: left">vector</td><td style="text-align: left">x-direction magnetic field [nT]</td></tr><tr><td style="text-align: left"><code>flux_a_y</code></td><td style="text-align: left">vector</td><td style="text-align: left">y-direction magnetic field [nT]</td></tr><tr><td style="text-align: left"><code>flux_a_z</code></td><td style="text-align: left">vector</td><td style="text-align: left">z-direction magnetic field [nT]</td></tr><tr><td style="text-align: left"><code>flux_a_t</code></td><td style="text-align: left">vector</td><td style="text-align: left">total magnetic field [nT]</td></tr><tr><td style="text-align: left"><code>mag_1_uc</code></td><td style="text-align: left">vector</td><td style="text-align: left">Mag 1 uncompensated (corrupted) scalar magnetometer measurements [nT]</td></tr><tr><td style="text-align: left"><code>mag_1_c</code></td><td style="text-align: left">vector</td><td style="text-align: left">Mag 1 compensated (clean) scalar magnetometer measurements [nT]</td></tr><tr><td style="text-align: left"><code>flight</code></td><td style="text-align: left">vector</td><td style="text-align: left">flight number(s)</td></tr><tr><td style="text-align: left"><code>line</code></td><td style="text-align: left">vector</td><td style="text-align: left">line number(s), i.e., segments within <code>flight</code></td></tr><tr><td style="text-align: left"><code>ins_dt</code></td><td style="text-align: left">scalar</td><td style="text-align: left">INS measurement time step [s]</td></tr><tr><td style="text-align: left"><code>ins_tt</code></td><td style="text-align: left">vector</td><td style="text-align: left">INS time [s]</td></tr><tr><td style="text-align: left"><code>ins_lat</code></td><td style="text-align: left">vector</td><td style="text-align: left">INS latitude  [deg]</td></tr><tr><td style="text-align: left"><code>ins_lon</code></td><td style="text-align: left">vector</td><td style="text-align: left">INS longitude [deg]</td></tr><tr><td style="text-align: left"><code>ins_alt</code></td><td style="text-align: left">vector</td><td style="text-align: left">INS altitude  [m]</td></tr><tr><td style="text-align: left"><code>ins_vn</code></td><td style="text-align: left">vector</td><td style="text-align: left">INS north velocity [m/s]</td></tr><tr><td style="text-align: left"><code>ins_ve</code></td><td style="text-align: left">vector</td><td style="text-align: left">INS east  velocity [m/s]</td></tr><tr><td style="text-align: left"><code>ins_vd</code></td><td style="text-align: left">vector</td><td style="text-align: left">INS down  velocity [m/s]</td></tr><tr><td style="text-align: left"><code>ins_fn</code></td><td style="text-align: left">vector</td><td style="text-align: left">INS north specific force [m/s]</td></tr><tr><td style="text-align: left"><code>ins_fe</code></td><td style="text-align: left">vector</td><td style="text-align: left">INS east  specific force [m/s]</td></tr><tr><td style="text-align: left"><code>ins_fd</code></td><td style="text-align: left">vector</td><td style="text-align: left">INS down  specific force [m/s]</td></tr><tr><td style="text-align: left"><code>ins_Cnb</code></td><td style="text-align: left">3x3xN</td><td style="text-align: left">INS direction cosine matrix (body to navigation) [-]</td></tr><tr><td style="text-align: left"><code>ins_roll</code></td><td style="text-align: left">vector</td><td style="text-align: left">INS roll [deg]</td></tr><tr><td style="text-align: left"><code>ins_pitch</code></td><td style="text-align: left">vector</td><td style="text-align: left">INS pitch [deg]</td></tr><tr><td style="text-align: left"><code>ins_yaw</code></td><td style="text-align: left">vector</td><td style="text-align: left">INS yaw [deg]</td></tr><tr><td style="text-align: left"><code>ins_P</code></td><td style="text-align: left">17x17xN</td><td style="text-align: left">INS covariance matrix, only relevant for simulated data, otherwise zeros [-]</td></tr></table><p>If a MAT file is provided, the above fields may also be provided, but the non-INS fields should be within the specified <code>traj_field</code> MAT struct and the INS fields should be within the specified <code>ins_field</code> MAT struct and without <code>ins_</code> prefixes. This is the standard way the MATLAB-companion outputs data.</p><p><strong>Arguments:</strong></p><ul><li><code>xyz_file</code>:   path/name of HDF5 or MAT file containing flight data</li><li><code>traj_field</code>: (optional) trajectory struct field within MAT file to use, not relevant for HDF5 file</li><li><code>ins_field</code>:  (optional) INS struct field within MAT file to use, <code>:none</code> if unavailable, not relevant for HDF5 file</li><li><code>flight</code>:     (optional) flight number, only used if not in file</li><li><code>line</code>:       (optional) line number, i.e., segment within <code>flight</code>, only used if not in file</li><li><code>dt</code>:         (optional) measurement time step [s], only used if not in file</li><li><code>silent</code>:     (optional) if true, no print outs</li></ul><p><strong>Returns:</strong></p><ul><li><code>xyz</code>: <code>XYZ0</code> flight data struct</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/1822083fc9e06c4cedaa920e2d10dfbe0af6cc12/src/get_XYZ0.jl#L1-L76">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MagNav.get_XYZ20" href="#MagNav.get_XYZ20"><code>MagNav.get_XYZ20</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_XYZ20(xyz_h5::String; tt_sort::Bool=true, silent::Bool=false)</code></pre><p>Get <code>XYZ20</code> flight data from saved HDF5 file. Based on SGL 2020 data fields.</p><p><strong>Arguments:</strong></p><ul><li><code>xyz_h5</code>:  path/name of HDF5 file containing flight data</li><li><code>tt_sort</code>: (optional) if true, sort data by time (instead of line)</li><li><code>silent</code>:  (optional) if true, no print outs</li></ul><p><strong>Returns:</strong></p><ul><li><code>xyz</code>: <code>XYZ20</code> flight data struct</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/1822083fc9e06c4cedaa920e2d10dfbe0af6cc12/src/get_XYZ.jl#L1-L13">source</a></section><section><div><pre><code class="nohighlight hljs">get_XYZ20(flight::Symbol, xyz_160_h5::String, xyz_h5::String;
          silent::Bool=false)</code></pre><p>Get 160 Hz (partial) <code>XYZ20</code> flight data from saved HDF5 file and  combine with 10 Hz <code>XYZ20</code> flight data from another saved HDF5 file.  Data is time sorted to ensure data is aligned.</p><p><strong>Arguments:</strong></p><ul><li><code>flight</code>:     name of flight data</li><li><code>xyz_160_h5</code>: path/name of HDF5 file containing flight data at 160 Hz</li><li><code>xyz_h5</code>:     path/name of HDF5 file containing flight data at 10 Hz</li><li><code>silent</code>:     (optional) if true, no print outs</li></ul><p><strong>Returns:</strong></p><ul><li><code>xyz</code>: <code>XYZ20</code> flight data struct</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/1822083fc9e06c4cedaa920e2d10dfbe0af6cc12/src/get_XYZ.jl#L104-L120">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MagNav.get_XYZ" href="#MagNav.get_XYZ"><code>MagNav.get_XYZ</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_XYZ(flight::Symbol, df_flight::DataFrame; tt_sort::Bool=true,
        reorient_vec::Bool=false, silent::Bool=false)</code></pre><p>Get <code>XYZ</code> flight data from saved HDF5 file via DataFrame lookup.</p><p><strong>Arguments:</strong></p><ul><li><code>flight</code>:       name of flight data</li><li><code>df_flight</code>:    lookup table (DataFrame) of flight files</li><li><code>tt_sort</code>:      (optional) if true, sort data by time (instead of line)</li><li><code>reorient_vec</code>: (optional) if true, align vector magnetometer with body frame</li><li><code>silent</code>:       (optional) if true, no print outs</li></ul><p><strong>Returns:</strong></p><ul><li><code>xyz</code>: <code>XYZ</code> flight data struct</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/1822083fc9e06c4cedaa920e2d10dfbe0af6cc12/src/get_XYZ.jl#L257-L272">source</a></section></article><h2 id="Create-Flight-Data"><a class="docs-heading-anchor" href="#Create-Flight-Data">Create Flight Data</a><a id="Create-Flight-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Create-Flight-Data" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="MagNav.create_XYZ0" href="#MagNav.create_XYZ0"><code>MagNav.create_XYZ0</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">create_XYZ0(mapS::MapS=get_map(namad);
            alt = 395,
            dt  = 0.1,
            t   = 300,
            v   = 68,
            ll1 = (),
            ll2 = (),
            N_waves        = 1,
            flight         = 1,
            line           = 1,
            attempts::Int  = 10,
            mapV::MapV     = get_map(emm720),
            cor_sigma      = 1.0,
            cor_tau        = 600.0,
            cor_var        = 1.0^2,
            cor_drift      = 0.001,
            cor_perm_mag   = 5.0,
            cor_ind_mag    = 5.0,
            cor_eddy_mag   = 0.5,
            init_pos_sigma = 3.0,
            init_alt_sigma = 0.001,
            init_vel_sigma = 0.01,
            init_att_sigma = deg2rad(0.01),
            VRW_sigma      = 0.000238,
            ARW_sigma      = 0.000000581,
            baro_sigma     = 1.0,
            ha_sigma       = 0.001,
            a_hat_sigma    = 0.01,
            acc_sigma      = 0.000245,
            gyro_sigma     = 0.00000000727,
            fogm_sigma     = 1.0,
            baro_tau       = 3600.0,
            acc_tau        = 3600.0,
            gyro_tau       = 3600.0,
            fogm_tau       = 600.0,
            save_h5::Bool  = false,
            xyz_h5::String = &quot;xyz_data.h5&quot;)</code></pre><p>Create basic flight data. Assumes constant altitude (2D flight). May create a trajectory that passes over map regions without magnetic data. No required arguments, though many are available to create custom data.</p><p><strong>Trajectory Arguments:</strong></p><ul><li><code>mapS</code>:     (optional) <code>MapS</code> scalar magnetic anomaly map struct</li><li><code>alt</code>:      (optional) altitude  [m]</li><li><code>dt</code>:       (optional) measurement time step [s]</li><li><code>t</code>:        (optional) total flight time, ignored if <code>ll2</code> is set [s]</li><li><code>v</code>:        (optional) approximate aircraft velocity [m/s]</li><li><code>ll1</code>:      (optional) inital (lat,lon) point [deg]</li><li><code>ll2</code>:      (optional) final  (lat,lon) point [deg]</li><li><code>N_waves</code>:  (optional) number of sine waves along path</li><li><code>mapV</code>:     (optional) <code>MapV</code> vector magnetic anomaly map struct</li><li><code>flight</code>:   (optional) flight number</li><li><code>line</code>:     (optional) line number, i.e., segment within <code>flight</code></li><li><code>attempts</code>: (optional) maximum attempts at creating flight path on <code>mapS</code></li><li><code>save_h5</code>:  (optional) if true, save HDF5 file <code>xyz_h5</code></li><li><code>xyz_h5</code>:   (optional) path/name of HDF5 file to save with flight data</li></ul><p><strong>Compensated Measurement Corruption Arguments:</strong></p><ul><li><code>cor_var</code>:        (optional) corruption measurement (white) noise variance [nT^2]</li><li><code>fogm_sigma</code>:     (optional) FOGM catch-all bias [nT]</li><li><code>fogm_tau</code>:       (optional) FOGM catch-all time constant [s]</li></ul><p><strong>Uncompensated Measurement Corruption Arguments:</strong></p><ul><li><code>cor_sigma</code>:      (optional) corruption FOGM catch-all bias [nT]</li><li><code>cor_tau</code>:        (optional) corruption FOGM catch-all time constant [s]</li><li><code>cor_var</code>:        (optional) corruption measurement (white) noise variance [nT^2]</li><li><code>cor_drift</code>:      (optional) corruption measurement linear drift [nT/s]</li><li><code>cor_perm_mag</code>:   (optional) corruption permanent field TL coef std dev</li><li><code>cor_ind_mag</code>:    (optional) corruption induced field TL coef std dev</li><li><code>cor_eddy_mag</code>:   (optional) corruption eddy current TL coef std dev</li></ul><p><strong>INS Arguments:</strong></p><ul><li><code>init_pos_sigma</code>: (optional) initial position uncertainty [m]</li><li><code>init_alt_sigma</code>: (optional) initial altitude uncertainty [m]</li><li><code>init_vel_sigma</code>: (optional) initial velocity uncertainty [m/s]</li><li><code>init_att_sigma</code>: (optional) initial attitude uncertainty [rad]</li><li><code>VRW_sigma</code>:      (optional) velocity random walk [m/s^2 /sqrt(Hz)]</li><li><code>ARW_sigma</code>:      (optional) angular random walk [rad/s /sqrt(Hz)]</li><li><code>baro_sigma</code>:     (optional) barometer bias [m]</li><li><code>ha_sigma</code>:       (optional) barometer aiding altitude bias [m]</li><li><code>a_hat_sigma</code>:    (optional) barometer aiding vertical accel bias [m/s^2]</li><li><code>acc_sigma</code>:      (optional) accelerometer bias [m/s^2]</li><li><code>gyro_sigma</code>:     (optional) gyroscope bias [rad/s]</li><li><code>baro_tau</code>:       (optional) barometer time constant [s]</li><li><code>acc_tau</code>:        (optional) accelerometer time constant [s]</li><li><code>gyro_tau</code>:       (optional) gyroscope time constant [s]</li></ul><p><strong>Returns:</strong></p><ul><li><code>xyz</code>: <code>XYZ0</code> flight data struct</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/1822083fc9e06c4cedaa920e2d10dfbe0af6cc12/src/create_XYZ0.jl#L1-L92">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../structs/">« Custom Structs</a><a class="docs-footer-nextpage" href="../maps/">Magnetic Anomaly Maps »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Wednesday 10 May 2023 19:43">Wednesday 10 May 2023</span>. Using Julia version 1.9.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
