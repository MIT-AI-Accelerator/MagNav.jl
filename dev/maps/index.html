<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Magnetic Anomaly Maps · MagNav.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="MagNav.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">MagNav.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">MagNav.jl</a></li><li><a class="tocitem" href="../structs/">Custom Structs</a></li><li><a class="tocitem" href="../data/">Flight Path &amp; INS Data</a></li><li class="is-active"><a class="tocitem" href>Magnetic Anomaly Maps</a><ul class="internal"><li><a class="tocitem" href="#Load-Map-Data"><span>Load Map Data</span></a></li><li><a class="tocitem" href="#Upward-Continue-Map"><span>Upward Continue Map</span></a></li><li><a class="tocitem" href="#Interpolate-Map"><span>Interpolate Map</span></a></li><li><a class="tocitem" href="#Plot-Map"><span>Plot Map</span></a></li></ul></li><li><a class="tocitem" href="../comp/">Aeromagnetic Compensation</a></li><li><a class="tocitem" href="../nncomp/">NN-Based Model Diagrams</a></li><li><a class="tocitem" href="../nav/">Navigation Algorithms</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Magnetic Anomaly Maps</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Magnetic Anomaly Maps</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/master/docs/src/maps.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Magnetic-Anomaly-Maps"><a class="docs-heading-anchor" href="#Magnetic-Anomaly-Maps">Magnetic Anomaly Maps</a><a id="Magnetic-Anomaly-Maps-1"></a><a class="docs-heading-anchor-permalink" href="#Magnetic-Anomaly-Maps" title="Permalink"></a></h1><p>The following are key functions related to magnetic anomaly maps.</p><h2 id="Load-Map-Data"><a class="docs-heading-anchor" href="#Load-Map-Data">Load Map Data</a><a id="Load-Map-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Load-Map-Data" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="MagNav.get_map" href="#MagNav.get_map"><code>MagNav.get_map</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_map(map_file::String; map_units::Symbol=:deg)</code></pre><p>Get map data from saved file. Map files are typically saved with <code>:deg</code> units.</p><p><strong>Arguments:</strong></p><ul><li><code>map_file</code>:  path/name of magnetic anomaly map HDF5 or MAT file</li><li><code>map_units</code>: (optional) map xx/yy units used in HDF5 file {<code>:deg</code>,<code>:rad</code>}</li></ul><p><strong>Returns:</strong></p><ul><li><code>mapS</code> or <code>mapV</code>: <code>MapS</code> scalar or <code>MapV</code> vector magnetic anomaly map struct</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/2c5f6a5779dc6fc87d02d9e0f0df44c0fa5acbfe/src/get_map.jl#L1-L12">source</a></section><section><div><pre><code class="nohighlight hljs">get_map(map_name::Symbol, df_map::DataFrame; map_units::Symbol=:deg)</code></pre><p>Get map data from saved file via DataFrame lookup.  Map files are typically saved with <code>:deg</code> units.</p><p><strong>Arguments:</strong></p><ul><li><code>map_name</code>:  name of magnetic anomaly map</li><li><code>df_map</code>:    lookup table (DataFrame) of map files</li><li><code>map_units</code>: (optional) map xx/yy units used in HDF5 file {<code>:deg</code>,<code>:rad</code>}</li></ul><p><strong>Returns:</strong></p><ul><li><code>mapS</code> or <code>mapV</code>: <code>MapS</code> scalar or <code>MapV</code> vector magnetic anomaly map struct</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/2c5f6a5779dc6fc87d02d9e0f0df44c0fa5acbfe/src/get_map.jl#L102-L115">source</a></section></article><h2 id="Upward-Continue-Map"><a class="docs-heading-anchor" href="#Upward-Continue-Map">Upward Continue Map</a><a id="Upward-Continue-Map-1"></a><a class="docs-heading-anchor-permalink" href="#Upward-Continue-Map" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="MagNav.upward_fft" href="#MagNav.upward_fft"><code>MagNav.upward_fft</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">upward_fft(map_map, dx, dy, dz; expand::Bool=true, α=0)</code></pre><p>Upward continuation of a potential field (i.e. magnetic anomaly field) map.  Uses the Fast Fourier Transform to convert the map to the frequency domain,  applies an upward continuation filter, and converts back to the spatial domain.  Optionally expands the map temporarily with periodic padding. Downward  continuation can be done to a limited degree as well, but be careful as this  can be unstable and amplify high frequencies (i.e. noise).</p><p>Reference: Blakely, Potential Theory in Gravity and Magnetic Applications,  2009, Chapter 12 &amp; Appendix B (pg. 315-317 &amp; 402).</p><p><strong>Arguments</strong></p><ul><li><code>map_map</code>: <code>ny</code> x <code>nx</code> 2D gridded map data</li><li><code>dx:</code>      x-direction map sample interval [m]</li><li><code>dy</code>:      y-direction map sample interval [m]</li><li><code>dz</code>:      z-direction upward continuation distance [m]</li><li><code>expand</code>:  (optional) if true, expand map temporarily to limit edge effects</li><li><code>α</code>:       (optional) regularization parameter for downward continuation</li></ul><p><strong>Returns</strong></p><ul><li><code>map_out</code>: <code>ny</code> x <code>nx</code> upward continued 2D gridded map data</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/2c5f6a5779dc6fc87d02d9e0f0df44c0fa5acbfe/src/map_fft.jl#L1-L24">source</a></section><section><div><pre><code class="nohighlight hljs">upward_fft(map_map::Union{MapS,MapV}, alt; expand::Bool=true, α=0)</code></pre><p><strong>Arguments</strong></p><ul><li><code>map_map</code>: <code>MapS</code> scalar or <code>MapV</code> vector magnetic anomaly map struct</li><li><code>alt</code>:     target upward continuation altitude [m]</li><li><code>expand</code>:  (optional) if true, expand map temporarily to limit edge effects</li><li><code>α</code>:       (optional) regularization parameter for downward continuation</li></ul><p><strong>Returns</strong></p><ul><li><code>map_out</code>: <code>MapS</code> scalar or <code>MapV</code> vector magnetic anomaly map struct with upward continued map</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/2c5f6a5779dc6fc87d02d9e0f0df44c0fa5acbfe/src/map_fft.jl#L46-L57">source</a></section></article><h2 id="Interpolate-Map"><a class="docs-heading-anchor" href="#Interpolate-Map">Interpolate Map</a><a id="Interpolate-Map-1"></a><a class="docs-heading-anchor-permalink" href="#Interpolate-Map" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="MagNav.map_interpolate" href="#MagNav.map_interpolate"><code>MagNav.map_interpolate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">map_interpolate(map_map, map_xx, map_yy, type::Symbol = :cubic)</code></pre><p>Create map grid interpolation, equivalent of griddedInterpolant in MATLAB.  Uses the Interpolations package rather than Dierckx or GridInterpolations, as  Interpolations was found to be fastest for MagNav use cases.</p><p><strong>Arguments:</strong></p><ul><li><code>map_map</code>: <code>ny</code> x <code>nx</code> 2D gridded map data</li><li><code>map_xx</code>:  <code>nx</code> x-direction map coordinates</li><li><code>map_yy</code>:  <code>ny</code> y-direction map coordinates</li><li><code>type</code>:    (optional) type of interpolation {:linear,:quad,:cubic}</li></ul><p><strong>Returns:</strong></p><ul><li><code>itp_map</code>: map grid interpolation</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/2c5f6a5779dc6fc87d02d9e0f0df44c0fa5acbfe/src/map_functions.jl#L1-L16">source</a></section><section><div><pre><code class="nohighlight hljs">map_interpolate(mapS::MapS, type::Symbol = :cubic; vert::Bool = false)</code></pre><p>Create map grid interpolation, equivalent of griddedInterpolant in MATLAB. Optionally return vertical derivative grid interpolation, which is calculated using finite differences between the map and a slightly upward continued map.</p><p><strong>Arguments:</strong></p><ul><li><code>mapS</code>: <code>MapS</code> scalar magnetic anomaly map struct</li><li><code>type</code>: (optional) type of interpolation {:linear,:quad,:cubic}</li><li><code>vert</code>: (optional) if true, also return vertical derivative grid interpolation</li></ul><p><strong>Returns:</strong></p><ul><li><code>itp_map</code>: map grid interpolation</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/2c5f6a5779dc6fc87d02d9e0f0df44c0fa5acbfe/src/map_functions.jl#L35-L49">source</a></section><section><div><pre><code class="nohighlight hljs">map_interpolate(mapV::MapV, dim::Symbol = :X, type::Symbol = :cubic)</code></pre><p>Create map grid interpolation, equivalent of griddedInterpolant in MATLAB.</p><p><strong>Arguments:</strong></p><ul><li><code>mapV</code>: <code>MapV</code> vector magnetic anomaly map struct</li><li><code>dim</code>:  map dimension to interpolate {<code>:X</code>,<code>:Y</code>,<code>:Z</code>}</li><li><code>type</code>: (optional) type of interpolation {:linear,:quad,:cubic}</li></ul><p><strong>Returns:</strong></p><ul><li><code>itp_map</code>: map grid interpolation</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/2c5f6a5779dc6fc87d02d9e0f0df44c0fa5acbfe/src/map_functions.jl#L61-L73">source</a></section></article><h2 id="Plot-Map"><a class="docs-heading-anchor" href="#Plot-Map">Plot Map</a><a id="Plot-Map-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-Map" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="MagNav.plot_map" href="#MagNav.plot_map"><code>MagNav.plot_map</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plot_map(map_map::Matrix,
         map_xx::Vector     = [],
         map_yy::Vector     = [];
         clims::Tuple       = (0,0),
         dpi::Int           = 200,
         margin::Int        = 2,
         legend::Bool       = true,
         axis::Bool         = true,
         fewer_pts::Bool    = true,
         map_color::Symbol  = :usgs,
         bg_color::Symbol   = :white,
         map_units::Symbol  = :rad,
         plot_units::Symbol = :deg,
         b_e                = gr())</code></pre><p>Plot map.</p><p><strong>Arguments:</strong></p><ul><li><code>map_map</code>:    <code>ny</code> x <code>nx</code> 2D gridded map data</li><li><code>map_xx</code>:     <code>nx</code> x-direction (longitude) map coordinates [rad] or [deg]</li><li><code>map_yy</code>:     <code>ny</code> y-direction (latitude)  map coordinates [rad] or [deg]</li><li><code>clims</code>:      (optional) color scale limits</li><li><code>dpi</code>:        (optional) dots per inch (image resolution)</li><li><code>margin</code>:     (optional) margin around plot [mm]</li><li><code>legend</code>:     (optional) if true, show legend</li><li><code>axis</code>:       (optional) if true, show axes</li><li><code>fewer_pts</code>:  (optional) if true, reduce number of data points plotted</li><li><code>map_color</code>:  (optional) filled contour color scheme {<code>:usgs</code>,<code>:gray</code>,<code>:gray1</code>,<code>:gray2</code>,<code>:plasma</code>,<code>:magma</code>}</li><li><code>bg_color</code>:   (optional) background color</li><li><code>map_units</code>:  (optional) map  xx/yy units {<code>:rad</code>,<code>:deg</code>}</li><li><code>plot_units</code>: (optional) plot xx/yy units {<code>:rad</code>,<code>:deg</code>,<code>:m</code>}</li><li><code>b_e</code>:        (optional) plotting backend</li></ul><p><strong>Returns:</strong></p><ul><li><code>p1</code>: plot with map</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/2c5f6a5779dc6fc87d02d9e0f0df44c0fa5acbfe/src/map_functions.jl#L1227-L1263">source</a></section><section><div><pre><code class="nohighlight hljs">plot_map(mapS::Union{MapS,MapSd};
         clims::Tuple       = (0,0),
         dpi::Int           = 200,
         margin::Int        = 2,
         legend::Bool       = true,
         axis::Bool         = true,
         fewer_pts::Bool    = true,
         map_color::Symbol  = :usgs,
         bg_color::Symbol   = :white,
         map_units::Symbol  = :rad,
         plot_units::Symbol = :deg,
         b_e                = gr())</code></pre><p>Plot map.</p><p><strong>Arguments:</strong></p><ul><li><code>mapS</code>:       <code>MapS</code> or <code>MapSd</code> scalar magnetic anomaly map struct</li><li><code>clims</code>:      (optional) color scale limits</li><li><code>dpi</code>:        (optional) dots per inch (image resolution)</li><li><code>margin</code>:     (optional) margin around plot [mm]</li><li><code>legend</code>:     (optional) if true, show legend</li><li><code>axis</code>:       (optional) if true, show axes</li><li><code>fewer_pts</code>:  (optional) if true, reduce number of data points plotted</li><li><code>map_color</code>:  (optional) filled contour color scheme {<code>:usgs</code>,<code>:gray</code>,<code>:gray1</code>,<code>:gray2</code>,<code>:plasma</code>,<code>:magma</code>}</li><li><code>bg_color</code>:   (optional) background color</li><li><code>map_units</code>:  (optional) map  xx/yy units {<code>:rad</code>,<code>:deg</code>}</li><li><code>plot_units</code>: (optional) plot xx/yy units {<code>:rad</code>,<code>:deg</code>,<code>:m</code>}</li><li><code>b_e</code>:        (optional) plotting backend</li></ul><p><strong>Returns:</strong></p><ul><li><code>p1</code>: plot with map</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-AI-Accelerator/MagNav.jl/blob/2c5f6a5779dc6fc87d02d9e0f0df44c0fa5acbfe/src/map_functions.jl#L1294-L1326">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../data/">« Flight Path &amp; INS Data</a><a class="docs-footer-nextpage" href="../comp/">Aeromagnetic Compensation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 9 March 2023 16:51">Thursday 9 March 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
